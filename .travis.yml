##### Configuration
language: cpp
dist: trusty
os: linux
sudo: require
compiler:
   - gcc
#   - clang

notifications:
   email:
      recipients:     
         - boutwork@gmail.com 
      on_success: change
      on_failure: change

before_install:
   - sudo add-apt-repository --yes ppa:ubuntu-toolchain-r/test
   - sudo apt-get update -qq

install: 
   # C++17
   - sudo apt-get install -qq g++-7
   - sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-7 90

before_script:
   - mkdir build
   - cd build

matrix:
   include:
      - os: linux
        script: cmake .. && make -j 8
      - os: linux
        script: cmake .. && make -j 8 && make check
      - os: linux
        script: |
         if [[ -n $(git diff --check HEAD^) ]]; then
           echo "You must remove whitespace before submitting a pull request"
           git diff --check HEAD^
           exit -1
         fi

